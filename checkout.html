<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Complete your purchase at MODA IMPETO.">
    <title>Checkout | MODA IMPETO</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,400;6..96,600;6..96,700&family=Cinzel:wght@400;600;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="checkout.css">
    <link rel="stylesheet" href="checkout_payment.css">

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>

</head>

<body>
    <!-- Navigation -->
    <nav class="nav scrolled" id="nav">
        <a href="index.html" class="nav__logo-link">
            <img src="assets/logo.png" alt="MODA IMPETO" class="nav__logo">
        </a>
        <div class="nav__actions" style="display: flex; align-items: center; gap: 15px;">
            <a href="order_history.html" class="nav__history-link"
                style="font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--color-gray); text-decoration: none; transition: color 0.3s;"
                onmouseover="this.style.color='#fff'" onmouseout="this.style.color='var(--color-gray)'">Order
                History</a>
            <div class="nav__cart">
                <a href="cart.html" class="nav__cart-link">
                    <svg viewBox="0 0 24 24" class="nav__cart-icon">
                        <path
                            d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                    <span class="nav__cart-count" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Checkout Content -->
    <main class="checkout-page">
        <div class="container">
            <h1 class="checkout-page__title">Checkout</h1>

            <div class="checkout-container">
                <!-- Form Section -->
                <div class="checkout-form-section">
                    <form id="checkoutForm" onsubmit="return false;">
                        <!-- Contact Info -->
                        <div class="form-group">
                            <h2 class="form-section-title">Contact Information</h2>
                            <div class="input-wrapper">
                                <input type="email" id="email" required placeholder="Email Address">
                            </div>
                        </div>

                        <!-- Shipping Address -->
                        <div class="form-group">
                            <h2 class="form-section-title">Shipping Address</h2>
                            <div class="input-row">
                                <div class="input-wrapper">
                                    <input type="text" id="firstName" required placeholder="First Name">
                                </div>
                                <div class="input-wrapper">
                                    <input type="text" id="lastName" required placeholder="Last Name">
                                </div>
                            </div>
                            <div class="input-wrapper">
                                <input type="text" id="address" required placeholder="Address">
                            </div>
                            <div class="input-wrapper">
                                <input type="text" id="apartment" placeholder="Apartment, suite, etc. (optional)">
                            </div>
                            <div class="input-row">
                                <div class="input-wrapper">
                                    <input type="text" id="city" required placeholder="City">
                                </div>
                                <div class="input-wrapper">
                                    <select id="state" required>
                                        <option value="" disabled selected>Select State</option>
                                        <option value="AL">Alabama</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="AR">Arkansas</option>
                                        <option value="CA">California</option>
                                        <option value="CO">Colorado</option>
                                        <option value="CT">Connecticut</option>
                                        <option value="DE">Delaware</option>
                                        <option value="FL">Florida</option>
                                        <option value="GA">Georgia</option>
                                        <option value="ID">Idaho</option>
                                        <option value="IL">Illinois</option>
                                        <option value="IN">Indiana</option>
                                        <option value="IA">Iowa</option>
                                        <option value="KS">Kansas</option>
                                        <option value="KY">Kentucky</option>
                                        <option value="LA">Louisiana</option>
                                        <option value="ME">Maine</option>
                                        <option value="MD">Maryland</option>
                                        <option value="MA">Massachusetts</option>
                                        <option value="MI">Michigan</option>
                                        <option value="MN">Minnesota</option>
                                        <option value="MS">Mississippi</option>
                                        <option value="MO">Missouri</option>
                                        <option value="MT">Montana</option>
                                        <option value="NE">Nebraska</option>
                                        <option value="NV">Nevada</option>
                                        <option value="NH">New Hampshire</option>
                                        <option value="NJ">New Jersey</option>
                                        <option value="NM">New Mexico</option>
                                        <option value="NY">New York</option>
                                        <option value="NC">North Carolina</option>
                                        <option value="ND">North Dakota</option>
                                        <option value="OH">Ohio</option>
                                        <option value="OK">Oklahoma</option>
                                        <option value="OR">Oregon</option>
                                        <option value="PA">Pennsylvania</option>
                                        <option value="RI">Rhode Island</option>
                                        <option value="SC">South Carolina</option>
                                        <option value="SD">South Dakota</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="TX">Texas</option>
                                        <option value="UT">Utah</option>
                                        <option value="VT">Vermont</option>
                                        <option value="VA">Virginia</option>
                                        <option value="WA">Washington</option>
                                        <option value="WV">West Virginia</option>
                                        <option value="WI">Wisconsin</option>
                                        <option value="WY">Wyoming</option>
                                        <option value="DC">Washington D.C.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-row">
                                <div class="input-wrapper">
                                    <input type="text" id="zipCode" required placeholder="ZIP Code">
                                </div>
                                <div class="input-wrapper">
                                    <input type="text" value="USA" disabled
                                        style="background: var(--color-black-light); color: var(--color-gray); cursor: not-allowed;">
                                </div>
                            </div>
                            <div class="input-wrapper">
                                <input type="tel" id="phone" required placeholder="Phone Number">
                            </div>
                            <p class="shipping-notice"
                                style="font-size: 0.85rem; color: var(--color-gray); margin-top: 10px;">
                                ℹ️ Currently, we only ship to the contiguous United States (excluding Hawaii and
                                Alaska).
                            </p>
                        </div>

                        <!-- Payment Method -->
                        <div class="form-group">
                            <h2 class="form-section-title">Payment</h2>

                            <!-- Payment Selection -->
                            <div class="payment-selection">
                                <label class="payment-option">
                                    <input type="radio" name="paymentMethod" value="stripe" checked
                                        onchange="togglePaymentMethod()">
                                    <span class="payment-option-label">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                            <line x1="1" y1="10" x2="23" y2="10"></line>
                                        </svg>
                                        Credit Card
                                    </span>
                                </label>
                                <label class="payment-option">
                                    <input type="radio" name="paymentMethod" value="paypal"
                                        onchange="togglePaymentMethod()">
                                    <span class="payment-option-label">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M7.11 3.24L3.29 21h13.29L20.7 3.24H7.11z"></path>
                                        </svg>
                                        PayPal
                                    </span>
                                </label>
                            </div>

                            <!-- Stripe -->
                            <div id="stripe-section">
                                <div id="card-element" class="stripe-card-element">
                                    <!-- Stripe Elements will be inserted here -->
                                </div>
                                <div id="card-errors" class="stripe-card-errors" role="alert"></div>
                            </div>

                            <!-- PayPal -->
                            <div id="paypal-section" style="display: none; margin-top: 20px;">
                                <div id="paypal-button-container"></div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn--primary checkout-submit-btn" id="placeOrderBtn">
                            PLACE ORDER
                        </button>
                    </form>
                </div>

                <!-- Summary Section -->
                <div class="checkout-summary-section">
                    <div class="summary-box">
                        <h2 class="summary-title">Order Summary</h2>
                        <div class="summary-items" id="checkoutItems">
                            <!-- Items rendered by JS -->
                        </div>
                        <div class="summary-divider"></div>
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="checkoutSubtotal">¥0</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping</span>
                            <span>Free</span>
                        </div>
                        <div class="summary-total">
                            <span>Total</span>
                            <span id="checkoutTotal">¥0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Overlay -->
    <div id="successOverlay" class="success-overlay">
        <div class="success-content">
            <svg class="success-icon" viewBox="0 0 24 24">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
            </svg>
            <h2>ORDER PLACED</h2>
            <p>Thank you for your purchase. Your order number is <span id="orderNumber">#IMPETO-00000</span></p>
            <a href="index.html" class="btn btn--outline">Back to Home</a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" id="footer">
        <div class="container">
            <div class="footer__bottom">
                <p class="footer__copyright">© 2026 MODA IMPETO. All rights reserved.</p>
                <div class="footer__legal">
                    <a href="privacy.html">Privacy Policy</a>
                    <a href="shipping.html">Shipping Policy</a>
                    <a href="refund.html">Return & Refund</a>
                    <a href="terms.html">Terms of Service</a>
                    <a href="contact.html">Contact Information</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof initCheckout === 'function') {
                initCheckout();
            }
        });
    </script>
</body>

</html>